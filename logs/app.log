[2024-12-04 16:07:13,879] [14557] [ScriptRunner.scriptThread] [INFO ] resetting database details...
[2024-12-04 16:07:13,880] [14557] [ScriptRunner.scriptThread] [INFO ] database is ready to connect to world-db database of localhost host at port: 5432
[2024-12-04 16:07:13,881] [14557] [ScriptRunner.scriptThread] [INFO ] obtaining details to create database metadata file: data/metadata/database.txt
[2024-12-04 16:07:13,882] [14557] [ScriptRunner.scriptThread] [INFO ] fetching all schema names from database...
[2024-12-04 16:07:13,882] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,893] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,893] [14557] [ScriptRunner.scriptThread] [INFO ] creating postgres connection string...
[2024-12-04 16:07:13,893] [14557] [ScriptRunner.scriptThread] [INFO ] created
[2024-12-04 16:07:13,893] [14557] [ScriptRunner.scriptThread] [INFO ] connecting to database...
[2024-12-04 16:07:13,921] [14557] [ScriptRunner.scriptThread] [INFO ] connected
[2024-12-04 16:07:13,925] [14557] [ScriptRunner.scriptThread] [INFO ] fetched all schema names. number of schema names: 1
[2024-12-04 16:07:13,925] [14557] [ScriptRunner.scriptThread] [INFO ] fetching all the table names of schema: public...
[2024-12-04 16:07:13,925] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,926] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,929] [14557] [ScriptRunner.scriptThread] [INFO ] fetched all table names. number of tables: 4
[2024-12-04 16:07:13,929] [14557] [ScriptRunner.scriptThread] [INFO ] fetching column details of table: country_flag
[2024-12-04 16:07:13,929] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,929] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,936] [14557] [ScriptRunner.scriptThread] [INFO ] fetched column details. number of columns: 3
[2024-12-04 16:07:13,936] [14557] [ScriptRunner.scriptThread] [INFO ] fetching relationship details of table name: country_flag
[2024-12-04 16:07:13,936] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,939] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,943] [14557] [ScriptRunner.scriptThread] [INFO ] fetched relationship details. number of relationships: 0
[2024-12-04 16:07:13,943] [14557] [ScriptRunner.scriptThread] [INFO ] fetching column details of table: city
[2024-12-04 16:07:13,943] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,943] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,945] [14557] [ScriptRunner.scriptThread] [INFO ] fetched column details. number of columns: 6
[2024-12-04 16:07:13,945] [14557] [ScriptRunner.scriptThread] [INFO ] fetching relationship details of table name: city
[2024-12-04 16:07:13,945] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,948] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,952] [14557] [ScriptRunner.scriptThread] [INFO ] fetched relationship details. number of relationships: 1
[2024-12-04 16:07:13,952] [14557] [ScriptRunner.scriptThread] [INFO ] fetching column details of table: country
[2024-12-04 16:07:13,952] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,952] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,956] [14557] [ScriptRunner.scriptThread] [INFO ] fetched column details. number of columns: 15
[2024-12-04 16:07:13,956] [14557] [ScriptRunner.scriptThread] [INFO ] fetching relationship details of table name: country
[2024-12-04 16:07:13,956] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,959] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,964] [14557] [ScriptRunner.scriptThread] [INFO ] fetched relationship details. number of relationships: 1
[2024-12-04 16:07:13,964] [14557] [ScriptRunner.scriptThread] [INFO ] fetching column details of table: country_language
[2024-12-04 16:07:13,964] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,965] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,967] [14557] [ScriptRunner.scriptThread] [INFO ] fetched column details. number of columns: 4
[2024-12-04 16:07:13,967] [14557] [ScriptRunner.scriptThread] [INFO ] fetching relationship details of table name: country_language
[2024-12-04 16:07:13,967] [14557] [ScriptRunner.scriptThread] [INFO ] identifying query type...
[2024-12-04 16:07:13,969] [14557] [ScriptRunner.scriptThread] [INFO ] identified as SELECT query
[2024-12-04 16:07:13,972] [14557] [ScriptRunner.scriptThread] [INFO ] fetched relationship details. number of relationships: 1
[2024-12-04 16:07:13,973] [14557] [ScriptRunner.scriptThread] [INFO ] database metadata written to data/metadata/database.txt
[2024-12-04 16:07:13,973] [14557] [ScriptRunner.scriptThread] [INFO ] reading file: data/metadata/database.txt
[2024-12-04 16:07:13,973] [14557] [ScriptRunner.scriptThread] [INFO ] creating generative ai embeddings
[2024-12-04 16:07:13,981] [14557] [ScriptRunner.scriptThread] [INFO ] created generative ai embeddings
[2024-12-04 16:07:15,922] [14557] [ScriptRunner.scriptThread] [INFO ] creating new generative ai engine: AIzaSyCWvqnokwoq5q0COlK7rsHHBSF3_CRfVYk
[2024-12-04 16:07:15,924] [14557] [ScriptRunner.scriptThread] [INFO ] created engine: AIzaSyCWvqnokwoq5q0COlK7rsHHBSF3_CRfVYk
[2024-12-04 16:07:21,650] [14557] [ScriptRunner.scriptThread] [INFO ] executing similarity search in vector database...
[2024-12-04 16:07:21,651] [14557] [ScriptRunner.scriptThread] [INFO ] query: hello
[2024-12-04 16:07:22,121] [14557] [ScriptRunner.scriptThread] [INFO ] completed similarity search
[2024-12-04 16:07:22,122] [14557] [ScriptRunner.scriptThread] [INFO ] getting conversational chain from generative ai engine: chat-engine
[2024-12-04 16:07:22,122] [14557] [ScriptRunner.scriptThread] [INFO ] given prompt: input_variables=['context', 'question'] input_types={} partial_variables={} template='You are the smart agent who only answer question related to database extraction and \n        generate the postgres sql code in mention instruction format.\n            instructions:\n            1.answer all greeting/welcome/hi..hello. responses in nomral_response key value.\n            2.Analysed the provided text context and use provided database meta-data to generate the sql code as output.\n            3.provide output in key-value pair format: ["is_sql": True/False, "SQL": "None/converted SQL code","normal_response" :"response to query "]\n            4.if user prompt ask for other information apart form sql return : ["is_sql": False, "SQL": "None","normal_response" :"response to query "]\n            5.Only generate select keyword sql code if user prompt ask to update/insert/delete/other DB operation \n            return ["is_sql": False, "SQL": "update/insert/delete/other DB query not allowed","normal_response" :"response to query "]\n            6.Only answer to user prompt that are related to database information. if user prompt ask other outof context return\n            ["is_sql": false, "SQL": "outof context question","normal_response" :"response to query "].\n            7. provide output in json format but dont write header json word to it. only return json data.\n            user prompt:\xa0\n{question}\n\n            Context: \n{context}?\n\n            '
[2024-12-04 16:07:22,192] [14557] [ScriptRunner.scriptThread] [INFO ] obtained conversational chain
